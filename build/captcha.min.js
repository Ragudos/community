var recaptchaOnLoad = () => {
    var getTheme = () => {
        let theme = document.documentElement.getAttribute("data-theme");
        return theme == "dark" || theme == "light" ? theme : window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
    }
    document.querySelectorAll(".g-recaptcha").forEach((el) => {
        // @ts-ignore
        grecaptcha.render(el, {
            sitekey: document.querySelector("meta[name=\"g-recaptcha-sitekey\"]").getAttribute("content"),
            theme: getTheme(),
            // @ts-ignore
            size: el.dataset.size,
        });
    });
}

document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("form[data-withcaptcha=true]").forEach((el) => {
        el.addEventListener("htmx:responseError", (event) => {
            console.log(event);
        });
    })
});
